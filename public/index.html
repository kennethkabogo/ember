<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ember - Solver Engine</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>

    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="brand">
                <div class="brand-logo"><i data-lucide="layers"></i></div>
                <div>
                    <h1>EMBER</h1>
                    <p>Arbitrage Monitor</p>
                </div>
            </div>
            <div class="header-actions">
                <div class="notify-toggle">
                    <input type="checkbox" id="notifyToggle">
                    <label for="notifyToggle" title="Notify me when profitable">
                        <i data-lucide="bell"></i>
                    </label>
                </div>
                <button id="connectWallet" class="wallet-btn">Connect Wallet</button>
            </div>
        </header>

        <!-- Hero Card: Jar Value & Profitability -->
        <div class="hero-card status-red" id="heroCard">
            <div class="hero-header">
                <span class="hero-label">JAR VALUE (LIVE)</span>
                <span class="live-indicator"><span class="pulse-dot"></span> Live</span>
            </div>

            <div id="totalValue" class="hero-amount">$0.00</div>

            <!-- Progress Bar -->
            <div class="progress-track">
                <div id="progressBar" class="progress-fill" style="width: 0%;"></div>
            </div>

            <!-- Profit Stats Grid -->
            <div class="hero-stats">
                <div class="stat-col">
                    <div class="stat-label">
                        Cost to Claim <i data-lucide="info" class="info-icon" id="costTooltip"></i>
                    </div>
                    <div id="uniCost" class="stat-val">--</div>

                    <!-- Gas Strategy Toggle -->
                    <div class="gas-toggle-container">
                        <button class="gas-btn active" data-mode="standard">Std</button>
                        <button class="gas-btn" data-mode="fast" title="Fast (1.25x)">⚡</button>
                        <button class="gas-btn" data-mode="instant" title="War Mode (1.5x + 10 Gwei)">⚔️</button>
                    </div>
                </div>
                <div class="stat-col right-align">
                    <div class="stat-label">NET PROFIT</div>
                    <div id="netProfit" class="stat-val profit-text">--</div>
                </div>
            </div>

            <!-- Status Banner -->
            <div id="statusBanner" class="status-banner">
                <i data-lucide="alert-triangle"></i>
                <span>NOT PROFITABLE YET</span>
            </div>

            <!-- Action Button -->
            <button id="executeBtn" class="action-btn" disabled>
                Burn & Claim
            </button>
        </div>

        <!-- Timeline Widget -->
        <div class="widget-card">
            <div class="widget-header">
                <h3 class="widget-title">ESTIMATED PROFIT</h3>
                <span class="widget-sub">At current growth rate</span>
            </div>
            <div class="timeline-grid">
                <div class="timeline-item">
                    <span class="time-label">24h</span>
                    <span id="proj1d" class="time-val">--</span>
                </div>
                <div class="timeline-item">
                    <span class="time-label">7d</span>
                    <span id="proj7d" class="time-val">--</span>
                </div>
                <div class="timeline-item">
                    <span class="time-label">30d</span>
                    <span id="proj30d" class="time-val">--</span>
                </div>
            </div>
        </div>

        <!-- Assets List (Collapsible/Bottom) -->
        <div class="assets-section">
            <div class="section-header">
                <h2>ASSETS IN JAR</h2>
                <div id="dustBadge" class="dust-badge" style="display:none;">Filtered 0 dust tokens</div>
            </div>

            <div id="tokenList" class="token-list">
                <div class="empty-state">
                    <i data-lucide="loader-2" class="spin"></i>
                    <p>Scanning Jar...</p>
                </div>
            </div>

            <div class="io-summary">
                <div class="io-row">
                    <span>Expected Input:</span>
                    <span id="expectedInput">4,000 UNI</span>
                </div>
                <div class="io-row">
                    <span>Expected Output:</span>
                    <span id="expectedOutput">0 Assets ($0)</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="security-footer">
            <i data-lucide="shield-check"></i>
            <span>Secure Client-Side Execution</span>
        </div>

    </div>

    <!-- Confirm Modal -->
    <div id="confirmModal" class="modal-overlay">
        <div class="modal-card">
            <div class="modal-icon">
                <i data-lucide="check-circle-2"></i>
            </div>
            <h2 class="modal-title">Confirm Trade</h2>
            <div id="confirmDetails" class="modal-details"></div>

            <div class="tip-jar-box">
                <input type="checkbox" id="tipCheckbox" checked>
                <label for="tipCheckbox">
                    Send 0.01 ETH Developer Tip? <i data-lucide="coffee"></i>
                </label>
            </div>

            <div class="modal-actions">
                <button id="cancelBtn" class="modal-btn secondary">Cancel</button>
                <button id="confirmBtn" class="modal-btn primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="ethers.min.js"></script>
    <script src="app.js"></script>
</body>

</html>